# （四）JS 运算符


### 1 浮点数的精度问题bug

1. 不要直接用浮点数之间进行运算，会产生精度误差。
2. 不要直接拿两个浮点数进行比较！

浮点数值的最高精度是17位小数，但在进行算术计算时其精确度远远不如整数。

```js
var result =0.1+0.2; //结果不是0.3,而是: 0.30000000000000004 
console.log(0.07 * 100); //结果不是7， 而是： 7.000000000000001
```


## 2. 递增递减运算符 


- 后置：先原值运算，后自加（先人后己）
- 前置：先自加，后运算（先已后人）
- 开发时，大多使用后置递增/减，并且代码独占一行，例如：num++; 或者num--;

```js

  var  num = 10;
  alert(++num + 10);   // 21 使用口诀：先自加，后返回值
  
  var  num1 = 10;
  alert(10 + num1++);  // 20 使用口诀：先返回原值，后自加 

```

## 3. 比较运算符

比较运算后，会返回一个布尔值，（true / false）作为比较运算的结果。

|比较运算符|说明|
|:-:|-|
|`<`|小于|
|`>`|大于|
|`<=`|大于或等于|
|`>=`|小于或等于|
|`==`|判等于|
|`!=`|判不等|
|`===`|全等于。要求值和数据类型均一致，则返回 `true`|
|`!==`|全不等于。要求值和数据类型至少一个不一致，则返回 `true`|

需要注意的是 `==` 和 `===` 的区别。
- `==` 会进行隐式转换。值相等则返回 `true`
- `===` 比较判断的时同时需要值相等和类型相同，两者均满足则返回 `true`


## 4. 逻辑运算符

#### 4.1 逻辑与 &&

- 语法：`expr1 && expr2 && ...`
- 若 `expr1` 为真，则返回 `expr2`
- 若 `expr1` 为假，则返回 `expr1`

```js
console.log(123 && 456); // 456
console.log(false && 123); // false
console.log(1 && 2 && 3); // 3
console.log(1 && 1 && false && 2); // false
```

#### 4.2 逻辑或 ||

- 语法：`expr1 || expr2 || ...`
- 若 `expr1` 为假，则返回 `expr2`
- 若 `expr1` 为真，则返回 `expr1`

```js
console.log(0 || 12); // 12
console.log(true ||  false || 2); // true
console.log(0 || false || true || -2); // true
```

## 5. 赋值运算符

- `+=`
- `-=`
- `*=`
- `/=`

## 6. 拓展：JS特殊运算符

### 6.1 数字转化：单目运算符 `+`

单目运算符 `+` 作用于数字无效，结果不变。但是可以用来转化非数字类型为数字，等效于 `Number()`。

```javascript
let x = false;
let y = "";
let z = "123.4";
console.log(+x); // 0
console.log(+y); // 0
console.log(+z); // 123.4
```

用于非数字型之间的数学运算，很简洁：

```javascript
let a = "12";
let b = "24";
console.log(+a + +b); // 36
```

### 6.2 逗号运算符 `,`

逗号运算符能让我们处理多个语句，使用 `,` 将它们分开。每个语句都运行了，**但是只有最后的语句的结果会被返回**。

```javascript
let a = (3 + 4, 5 + 6);
console.log(a); // 11
```

### 6.3 布尔值转换符 `!!`

两个相邻的非逻辑运算符组成的 `!!`，可以将一个值转换为对应的布尔值。等效于 `Boolean()`。

```javascript
console.log(!!"0"); // true
console.log(!!0); // false
console.log(!!undefined); //false
console.log(!!"aaa"); // true
```

### 6.4 空值合并运算符 `??`

我们将值既不是 `null` 也不是 `undefined` 的表达式定义为已定义的值（defined）。即：`??`。

`a ?? b` 结果为：
- 若 `a` 已定义，则结果为 `a`
- 若 `a` 不是已定义的，则结果为 `b`

等价于：

```javascript
(a !== null && a !== undefined) ? a : b;
```