# （六）函数

## 1. 概述

函数：就是封装了一段可被重复调用执行的代码块。通过此代码块可以实现大量代码的重复使用。
封装：把一个或者多个功能通过函数的方式封装起来，对外只提供一个简单的函数接口。

## 2. 函数的声明与调用

```js
// 声明
  1. 通过function关键字定义函数 -- 命名函数
  function 函数名() {}
  // 1.1 function 是声明函数的关键字，必须小写
  // 1.2 函数名 命名为动词形式 例: getSum

  调用：函数名(); 

   2. 通过函数表达式定义函数 ---匿名函数
  var fn = function() {};
  // 2.1 fn是变量名，不是函数名
  // 2.2 fn是变量，只不过变量存储的是函数
  // 2.3 函数表达式创建的函数可以通过 变量名(); 来调用
  // 2.4 函数表达式也可以定义形参和调用传入实参。

//匿名函数使用的第2种方式--匿名函数自调用
  (function(){
    alert(123);
  })();
```
```js
/*
    例用封装函数计算1-100累加和
  */
  function getSum() {
  var sumNum = 0; // 准备一个变量，保存累加和
  for (var i = 1; i <= 100; i++) {
    sumNum += i; // 把每个数值 都累加 到变量中
  }
    alert(sumNum);
  }
  // 调用函数
  getSum();
  ```


## 3. 箭头函数

创建一个函数更加简洁的方式，有两种方式：
- 不带花括号：`(...args) => expression`，计算表达式，直接返回。
- 带花括号：`(...args) => { bodu }`，可以编写多行多个语句，需要 `return` 语句返回。

```javascript
let sum = (a, b) => a + b;

let sum = (a, b) => {  // 花括号表示开始一个多行函数
  let result = a + b;
  return result; // 如果我们使用了花括号，那么我们需要一个显式的 “return”
};

alert( sum(1, 2) ); // 3
```

## 4. 形参与实参

声明时传入的为形参，调用时传入的为实参。

####2 4.1. 实参个数与形参个数不匹配的情况

|参数个数|说明|
|-|-|
|形参和实参个数相等|输出正确结果|
|实参个数多于形参|只取到形参的个数|
|实参个数少于形参|多的形参定义为undefined，结果为NaN|

```js
function sum(num1, num2) {
    console.log(num1 + num2);
}
sum(100, 200); // 300, 形参和实参个数相等，输出正确结果
sum(100, 400, 500, 700); // 500, 实参个数多于形参，只取到形参的个数
sum(200); // NaN, 实参个数少于形参，多的形参定义为undefined，结果为NaN
```

> 在JavaScript中，形参的默认值是 `undefined`。




## 5. 返回值
返回值：函数调用整体代表的数据；函数执行完成后可以通过return语句将指定数据返回 。

```js
// 声明函数
  function 函数名() {
    ...
    return 需要返回的值;
    // 1. 函数遇到return会停止执行，并返回指定的值
    // 1. 如果函数没有return 返回的值是undefined
  }
  // 调用函数
  函数名(); //此时调用函数就可以得到函数体内return的值
  ```

>break,continue,return的区别                    
1.break: 结束当前的循环体 (如for、while)                        
2.continue: 跳出本次循环，继续执行下次循环                      
3.return: 不仅可以退出(函数体内)循环，还能够返回return语句中的值，同时还可以结束当前的函数体内的代码

## 6. arguments 的使用

`arguments` 是所有JS函数内置的对象，但也只有函数具有。
当不确定有多少个参数传递的时候，可以用 arguments 来获取


```js
  function fn() {
    //arguments 里面存储了所有传递过来的实参
    console.log(arguments);// [1,2,3...]
    console.log(arguments[1]); // 2
    console.log(arguments.length); // 3
    
    //我们可以按照数组的方式 遍历argument  
  }
  fn(1, 2, 3);
  ```

```js
function test() {
    return arguments;
}
console.log(test(1,2,3,4));
```

输出：

```js
Arguments(4) [1, 2, 3, 4, callee: ƒ, Symbol(Symbol.iterator): ƒ]
```

函数的 `arguments` 是一种伪数组：

1. 具有数组的 `length` 属性
2. 按照索引方式进行存储
3. 没有真正数组的一些方法 `pop()`、`push()`

## 7. 构造函数

构造函数是一种特殊的函数，主要用来初始化对象，即为对象成员变量赋初始值,它总与new运算符一起使用，我们可以把对象中一些公共的属性和方法抽出来，然
后封装到这个函数里面。

构造函数的封装格式：

```js
 function 构造函数名(形参1，形参2，形参3...) {
    this.属性名1 = 参数1;
    this.属性名2 = 参数2;
    this.属性名3 = 参数3;
    this.方法名 = 函数体;
  }

  构造函数的调用格式

   var obj = new 构造函数名(实参1，实参2，实参3);
  // 以上代码中，obj即接收到构造函数创建出来的对象。
  注意事项：
    1.构造函数约定首字母大写
    2.函数内的属性和方法前面需要添加this，表示当前对象的属性和方法
    3.构造函数中不需要retrun返回结果
    4.但我们创建对象的时候，必须用new 来调用构造函数
    
    1.其他：构造函数如Stars(),抽取了对象的公共部分，封装到了函数里面，它
     泛指某一大类(class)
    2.创建对象，如new Stars();特指某一个，利用new关键字创建对象的过程
     我们也称为对象实例化



  // 工厂函数创建对象 这个把创建好的对象返回给函数调用处
  function createPerson(name, age, job) {
    var person = new Object();
    person.name = name;
    person.age = age;
    person.job = job;
    person.sayHi = function(){
      console.log('Hello,everyBody');
    }
    return person;
    }
  var p1 = createPerson('张三', 22, 'actor');
```

new关键字的作用(面试题)


1.在构造函数代码开始执行之前，创建一个空对象；              
2.修改this的指向，把this指向创建出来的空对象；              
3.执行构造函数内的代码，给这个新对象添加属性和方法                  
4.在函数完成之后，返回这个创建出来的新对象(所以构造函数里面不需要return)